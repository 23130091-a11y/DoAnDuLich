<!DOCTYPE html>
<html lang="vi">
{% load static %}
<head>
    <meta charset="UTF-8">
    <title>Web Du L·ªãch</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm px-4">
        <a class="navbar-brand fw-bold" href="#">Logo</a>
        <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="#">Trang ch·ªß</a></li>
            <li class="nav-item"><a class="nav-link" href="#">L·ªãch s·ª≠</a></li>
            <li class="nav-item"><a class="nav-link" href="#">ƒê·ªãa ƒëi·ªÉm</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Li√™n h·ªá</a></li>
        </ul>
    </nav>
</header>

<!-- Banner -->
<section class="hero position-relative text-center">
    <img src="{% static 'images/banner.jpg' %}" class="hero-img">
    
    <!-- Thanh t√¨m ki·∫øm 2 t·∫ßng -->
<div class="search-box container-fluid rounded-4 shadow-lg p-4 border border-3 border-info position-absolute top-50 start-50 translate-middle bg-white">
    
    <!-- üîπ √î t√¨m ki·∫øm l·ªõn ph√≠a tr√™n -->
    <div class="main-search mb-3 position-relative" style="max-width: 820px; margin: 0 auto;">
        <div class="input-group input-group-lg">
            <span class="input-group-text bg-white border-end-0">
                <i class="fa-solid fa-magnifying-glass text-secondary"></i>
            </span>
            <input type="text" id="searchInput" class="form-control border-start-0" placeholder="T√¨m ki·∫øm ƒë·ªãa ƒëi·ªÉm..." autocomplete="off">
        </div>
        <div id="suggestions" class="suggestions-box"></div>
    </div>


    <!-- üîπ H√†ng nh·ªè b√™n d∆∞·ªõi: v·ªã tr√≠ - n∆°i ƒë·∫øn - ng√†y ƒëi - n√∫t -->
    <form class="row align-items-center gx-3 justify-content-center">
        <div class="col-md-3">
            <div class="input-group">
                <span class="input-group-text bg-white">
                    <i class="fa-solid fa-location-dot text-primary"></i>
                </span>
                <input type="text" class="form-control" placeholder="V·ªã tr√≠ c·ªßa b·∫°n">
            </div>
        </div>

        <div class="col-md-3">
            <div class="input-group">
                <span class="input-group-text bg-white">
                    <i class="fa-solid fa-map-location-dot text-primary"></i>
                </span>
                <input type="text" class="form-control" placeholder="N∆°i b·∫°n mu·ªën ƒë·∫øn">
            </div>
        </div>

        <div class="col-md-3">
            <div class="input-group">
                <span class="input-group-text bg-white">
                    <i class="fa-solid fa-calendar-days text-primary"></i>
                </span>
                <input type="date" class="form-control">
            </div>
        </div>

        <div class="col-md-2">
            <button class="btn btn-warning w-100 fw-bold py-2">T√¨m ki·∫øm</button>
        </div>
    </form>
</div>

</section>

<!-- Danh m·ª•c du l·ªãch -->
<section class="categories bg-light py-4">
    <div class="container text-center">
        <div class="row g-4">
            <div class="col">
                <i class="fa-solid fa-umbrella-beach fa-2x text-info"></i>
                <p>Du l·ªãch v√† bi·ªÉn ƒë·∫£o</p>
            </div>
            <div class="col">
                <i class="fa-solid fa-mountain fa-2x text-info"></i>
                <p>Du l·ªãch n√∫i & cao nguy√™n</p>
            </div>
            <div class="col">
                <i class="fa-solid fa-landmark fa-2x text-info"></i>
                <p>VƒÉn h√≥a - l·ªãch s·ª≠</p>
            </div>
            <div class="col">
                <i class="fa-solid fa-leaf fa-2x text-info"></i>
                <p>Du l·ªãch sinh th√°i</p>
            </div>
            <div class="col">
                <i class="fa-solid fa-utensils fa-2x text-info"></i>
                <p>·∫®m th·ª±c - ch·ª£ ƒë√™m</p>
            </div>
            <div class="col">
                <i class="fa-solid fa-gift fa-2x text-info"></i>
                <p>L·ªÖ h·ªôi - s·ª± ki·ªán</p>
            </div>
            <div class="col">
                <i class="fa-solid fa-hotel fa-2x text-info"></i>
                <p>Ngh·ªâ d∆∞·ª°ng - th∆∞ gi√£n</p>
            </div>
        </div>
    </div>
</section>

<!-- G·ª£i √Ω ƒë·ªãa ƒëi·ªÉm -->
<section class="recommend py-5">
    <div class="container text-center">
        <h2 class="fw-bold mb-3">D·∫£i ƒê·∫•t H√¨nh Ch·ªØ S</h2>
        <p class="text-muted mb-4">Kh√°m ph√° Vi·ªát Nam theo c√°ch ri√™ng c·ªßa b·∫°n</p>
        <div class="row justify-content-center g-4">
            {% for r in results %}
            <div class="col-md-3">
                <div class="card shadow-sm border-0 position-relative">
                    <div class="image-wrapper">
                        <!-- ·∫¢nh ƒë·∫ßu ti√™n -->
                        <img src="{% static 'images/' %}{{ r.images.0 }}" class="card-img-top" alt="{{ r.name }}">

                        <!-- Overlay slideshow -->
                        <div class="image-overlay">
                            <div class="slideshow">
                                {% for img in r.images %}
                                <img src="{% static 'images/' %}{{ img }}" class="slide {% if forloop.first %}active{% endif %}">
                                {% endfor %}
                                <button class="prev">&#10094;</button>
                                <button class="next">&#10095;</button>
                            </div>
                        </div>
                    </div>

                    <div class="card-body text-center">
                        <h5 class="card-title fw-bold">{{ r.name }}</h5>
                        <p class="card-text">{{ r.desc }}</p>
                        <button class="btn btn-outline-primary explore-btn">Kh√°m ph√° ngay</button>
                    </div>
                </div>
            </div>

            {% endfor %}
        </div>
    </div>
</section>

<script>
const destinations = [
  "ƒê√† L·∫°t",
  "ƒê√† N·∫µng",
  "Ph√∫ Qu·ªëc",
  "H·ªôi An",
  "Nha Trang",
  "H√† N·ªôi",
  "Sapa",
  "Hu·∫ø",
  "V≈©ng T√†u",
  "C·∫ßn Th∆°"
];

const searchInput = document.getElementById("searchInput");
const suggestionsBox = document.getElementById("suggestions");

searchInput.addEventListener("input", function() {
  const query = this.value.toLowerCase();
  suggestionsBox.innerHTML = "";

  if (query.length === 0) {
    suggestionsBox.style.display = "none";
    return;
  }

  const filtered = destinations.filter(d => d.toLowerCase().includes(query));
  if (filtered.length === 0) {
    suggestionsBox.style.display = "none";
    return;
  }

  filtered.forEach(item => {
    const div = document.createElement("div");
    div.classList.add("suggestion-item");

    // L√†m n·ªïi b·∫≠t ch·ªØ tr√πng
    const regex = new RegExp(`(${query})`, "gi");
    div.innerHTML = item.replace(regex, "<span class='highlight'>$1</span>");

    div.addEventListener("click", () => {
      searchInput.value = item;
      suggestionsBox.style.display = "none";
    });
    suggestionsBox.appendChild(div);
  });

  suggestionsBox.style.display = "block";
});

document.addEventListener("click", (e) => {
  if (!searchInput.contains(e.target) && !suggestionsBox.contains(e.target)) {
    suggestionsBox.style.display = "none";
  }
});
</script>

<script>
// X·ª≠ l√Ω n√∫t "Kh√°m ph√° ngay"
document.querySelectorAll(".btn-outline-primary").forEach((btn) => {
  btn.addEventListener("click", (e) => {
    const card = e.target.closest(".card");
    const title = card.querySelector(".card-title").textContent;
    const desc = card.querySelector(".card-text").textContent;
    const imgSrc = card.querySelector("img").src;

    // T·∫°o modal t·∫°m th·ªùi
    const modal = document.createElement("div");
    modal.classList.add("explore-modal");
    modal.innerHTML = `
    <div class="modal-content">
        <div class="close-icon"><i class="fa-solid fa-xmark"></i></div>
        <img src="${imgSrc}" alt="${title}">
        <h3>${title}</h3>
        <p>${desc}</p>
        <button class="close-btn">ƒê√≥ng</button>
    </div>
    `;

    document.body.appendChild(modal);

    // ƒê√≥ng modal
    modal.querySelector(".close-btn").addEventListener("click", () => {
        modal.remove();
    });
    modal.querySelector(".close-icon").addEventListener("click", () => {
        modal.remove();
    });

  });
});
</script>

<script>
// Khi r√™ chu·ªôt v√†o h√¨nh ‚Üí ch·∫°y slideshow
document.querySelectorAll('.image-wrapper').forEach(wrapper => {
  let slides = wrapper.querySelectorAll('.slide');
  let index = 0;
  let interval;

  function showSlide(n) {
    slides.forEach(s => s.classList.remove('active'));
    slides[n].classList.add('active');
  }

  // B·∫Øt ƒë·∫ßu slideshow khi hover
  wrapper.addEventListener('mouseenter', () => {
    interval = setInterval(() => {
      index = (index + 1) % slides.length;
      showSlide(index);
    }, 2000);
  });

  // D·ª´ng slideshow khi r·ªùi chu·ªôt
  wrapper.addEventListener('mouseleave', () => {
    clearInterval(interval);
    index = 0;
    showSlide(index);
  });

  // ƒêi·ªÅu khi·ªÉn n√∫t tr√°i/ph·∫£i
  wrapper.querySelector('.prev').addEventListener('click', () => {
    index = (index - 1 + slides.length) % slides.length;
    showSlide(index);
  });

  wrapper.querySelector('.next').addEventListener('click', () => {
    index = (index + 1) % slides.length;
    showSlide(index);
  });
});
</script>

<script>
document.querySelectorAll('.image-wrapper').forEach(wrapper => {
  const slides = wrapper.querySelectorAll('.slide');
  let index = 0;
  let interval;

  function showSlide(n) {
    slides.forEach(s => s.classList.remove('active'));
    slides[n].classList.add('active');
  }

  wrapper.addEventListener('mouseenter', () => {
    interval = setInterval(() => {
      index = (index + 1) % slides.length;
      showSlide(index);
    }, 10000);
  });

  wrapper.addEventListener('mouseleave', () => {
    clearInterval(interval);
    index = 0;
    showSlide(index);
  });

  wrapper.querySelector('.prev').addEventListener('click', () => {
    index = (index - 1 + slides.length) % slides.length;
    showSlide(index);
  });

  wrapper.querySelector('.next').addEventListener('click', () => {
    index = (index + 1) % slides.length;
    showSlide(index);
  });
});
</script>


</body>
</html>
